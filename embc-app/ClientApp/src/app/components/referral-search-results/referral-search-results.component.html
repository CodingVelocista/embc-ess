<div class="search-results">
  <div *ngIf="rows.length; then searchResultsTable; else notFound"></div>
</div>

<ng-template #searchResultsTable>
  <table class="table table-responsive-lg table-rates">
    <thead>
      <tr class="light">
        <th scope="col" colspan="2">REFERRAL #</th>
        <th scope="col">SUPPLIER NAME</th>
        <th scope="col">VALID FROM...</th>
        <th scope="col">VALID TO...</th>
        <th scope="col">TYPE</th>
        <th scope="col">ACTION</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of rows" class="light" style="vertical-align:middle">
        <ng-container *ngIf="r.data?.active; then editable else deactivated"></ng-container>
        <ng-template #editable>
          <td class="dark"><input type="checkbox" (change)="onReferralChange(r, $event)"></td>
          <td>{{r.data?.id}}</td>
        </ng-template>
        <ng-template #deactivated>
          <td col-span="2">{{r.data?.id}}</td>
        </ng-template>
        <td><strong>{{r.data?.supplier?.name}}</strong></td>
        <td>{{r.data?.validFrom | date : 'MMM-dd-yyyy'}}</td>
        <td>{{r.data?.validTo | date : 'MMM-dd-yyyy'}}</td>
        <td [innerHTML]="getType(r)"></td>
        <td><a [routerLink]="['/' + path + '/referral', r.registrationId, r.data?.id]">View</a></td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #notFound>
  <p>{{notFoundMessage}}</p>
</ng-template>
