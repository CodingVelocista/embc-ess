<div class="row">
  <div class="col col-lg-8">
    <div class="mb-4">
      <h1>Add an Evacuee</h1>
      <p>Before starting a new evacuee registration, use the search tool on your dashboard to confirm that the evacuee hasnâ€™t already registered.</p>
      <small>
        All required fields are marked with an asterisk *
      </small>
    </div>
    <!-- <label>
      Name
      <input type="text" [formControl]="name">
    </label>
    {{name.value}} -->
    

    <div [formGroup]="form">
      <!-- <div class="mb-4">
        <h3 class="blue-header">
          TASK NUMBER & PLACE OF REGISTRATION
        </h3>
        <app-form-field required="false">
          <label>Task Number</label>
          <select class="form-control" formControlName="incidentTaskNumber">
            <option [ngValue]="null">-- Select task number</option>
            <option value="23465345">23465345</option>
          </select>
        </app-form-field>
        <app-form-field required="true">
          <label>Facility Name / Registration Location</label>
          <input class="form-control" type="text" formControlName="facility">
        </app-form-field>
        <app-form-field required="true">
          <label>Host Community</label>
          <select class="form-control" formControlName="hostCommunity">
            <option [ngValue]="null">-- Select task number</option>
            <option value="Grand Forks">Grand Forks</option>
          </select>
        </app-form-field>
      </div>-->
      
      <div class="mb-4">
        <h3 class="blue-header">
          RESTRICTED
        </h3>
        <p >
          Concerned family and friends may inquire about you and your family because of the emergency. We would like to provide these people with some information about you.</p>
          <p class="required">May we disclose your location and the contact information for you and your family members?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="restrictedAccess">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="restrictedAccess">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>
      <div class="mb-4" formGroupName="headOfHousehold">
        <h3 class="blue-header">
          EVACUEE DETAILS
        </h3>
        <app-form-field required="true">
          <label>Last Name</label>
          <input class="form-control" type="text" formControlName="lastName">
        </app-form-field>
        <app-form-field required="true">
          <label>First Name</label>
          <input class="form-control" type="text" formControlName="firstName">
        </app-form-field>
        <div class="form-row">
          <app-form-field class="col">
            <label>Initial</label>
            <input class="form-control" type="text" formControlName="initials">
          </app-form-field>
          <app-form-field class="col">
            <label>Nickname</label>
            <input class="form-control" type="text" formControlName="nickname">
          </app-form-field>
        </div>
        <div class="form-row">
          <app-form-field class="col" required="true">
            <label>Gender</label>
            <select  class="form-control" formControlName="gender">
              <option [ngValue]="null">Please select--</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </app-form-field>
          <app-form-field class="col" required="true">
            <label>Date of Birth</label>
            <input class="form-control" type="date" formControlName="dob">
          </app-form-field>
        </div>
      </div>
      <div class="mb-4">
        <h3 class="blue-header">
          EVACUEE FAMILY INFORMATION
        </h3>
        <p>
          Are you registering immediate family members who live in the same household with you?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="registeringFamilyMembers">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="registeringFamilyMembers">
            <label class="form-check-label">No</label>
          </div>
        </div>
        <!-- Card for family members -->          
        <button (click)="addFamilyMember()">Add blank family member</button>
        <div formArrayName="familyMembers">
          <div *ngFor="let member of familyMembers" class="card">
            <div class="card-body">
              <div class="row mb-2">
                <div class="col">
                  <label required="true">Last Name</label>
                  <input type="text" class="form-control">
                </div>
                <div class="col">
                  <label for="sameLastName">
                    Same last name as main applicant?
                  </label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="">
                  </div>
                </div>
              </div>
              <div class="row mb-2">
                <div class="col">
                  <label required="true">First Name</label>
                  <input type="text" class="form-control">
                </div>
                <div class="col">
                  <div class="form-check">
                    <label required="true">Middle Initial</label>
                    <input type="text" class="form-control">
                  </div>
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-6">
                    <label required="true">Relationship</label>
                    <input type="text" class="form-control">
                  </div>
                  <div class="col">
                    <app-form-field requried="true">
                      <label>Gender</label>
                      <select  class="form-control" formControlName="incidentTaskNumber">
                        <option [ngValue]="null">Please select--</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                      </select>
                    </app-form-field>
                  </div>
                  <div class="col">
                    <label required="true">Date of Birth</label>
                    <input type="date" class="form-control">
                  </div>
                </div>
              </div>
              <div class="card-footer">
                <div class="float-left">
                  <i class="fas fa-minus-square"></i>
                  <a href="">
                    Remove
                  </a>
                </div>
                <div class="float-right">
                  <i class="fas fa-plus-circle"></i>
                  <a href="">
                    Add another
                  </a>
                </div>
              </div>
          </div>
          <div class="card">
            <div class="card-body">
              <div class="row mb-2">
                <div class="col">
                  <label required="true">Last Name</label>
                  <input type="text" class="form-control">
                </div>
                <div class="col">
                  <label for="sameLastName">
                    Same last name as main applicant?
                  </label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="">
                  </div>
                </div>
              </div>
              <div class="row mb-2">
                <div class="col">
                  <label required="true">First Name</label>
                  <input type="text" class="form-control">
                </div>
                <div class="col">
                  <div class="form-check">
                    <label required="true">Middle Initial</label>
                    <input type="text" class="form-control">
                  </div>
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-6">
                    <label required="true">Relationship</label>
                    <input type="text" class="form-control">
                  </div>
                  <div class="col">
                    <app-form-field requried="true">
                      <label>Gender</label>
                      <select  class="form-control" formControlName="incidentTaskNumber">
                        <option [ngValue]="null">Please select--</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                      </select>
                    </app-form-field>
                  </div>
                  <div class="col">
                    <label required="true">Date of Birth</label>
                    <input type="date" class="form-control">
                  </div>
                </div>
              </div>
              <div class="card-footer">
                <div class="float-left">
                  <i class="fas fa-minus-square"></i>
                  <a href="">
                    Remove
                  </a>
                </div>
                <div class="float-right">
                  <i class="fas fa-plus-circle"></i>
                  <a href="">
                    Add another
                  </a>
                </div>
              </div>
          </div>
        </div>
      </div>

      <!-- Residence information -->
      <div class="mb-4">
        <h3 class="blue-header">
          PRIMARY RESIDENCE & CONTACT DETAILS
        </h3>
        <p class="required">
          Is your primary residence within BC.
        </p>

        <div *ngIf="form.value.primaryResidenceInBC==='false'"class="alert alert-danger" role="alert">
          <h4 class="alert-heading">
            This Evacuee is a Stranded Traveller.
          </h4>
          <p>Relevant procedure and lorem ipsum dolor sit amet...</p>
        </div>

        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="primaryResidenceInBC">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="primaryResidenceInBC">
            <label class="form-check-label">No</label>
          </div>
        </div>
        
        <!-- <div class="card">
          <div class="card-body">
            <div class="row mb-2">
              <div class="col">
                <label required="true">Apt/Suite/Building Number & Street Address</label>
                <input type="text" class="form-control">
              </div>
            </div>
            <div class="row mb-2">
              <div class="col">
                <div requried="true">
                  <label>Community</label>
                  <select  class="form-control" formControlName="community">
                    <option [ngValue]="null">Please select--</option>
                    <option value="victoria">Victoria</option>
                    <option value="grandForks">Grand Forks</option>
                  </select>
                </div>
              </div>
              <div class="col-3">
                <div requried="true">
                  <label>Province</label>
                  <select  class="form-control" formControlName="province">
                    <option [ngValue]="null">Please select--</option>
                    <option value="BC">BC</option>
                  </select>
                </div>
              </div>
              <div class="col-3">
                <div class="form-check">
                  <label required="true">Postal Code</label>
                  <input type="text" class="form-control">
                </div>
              </div>
            </div>
            <div class="row mb-2">
              <div class="col-6">
                <label required="true">Country</label>
                <input type="text" class="form-control" value="Canada" disabled>
              </div>
            </div>
            <div class="row mb-2">
              <div class="col">
                <label>Telephone / Mobile Number (10 digits)</label>
                <input type="text" class="form-control">
              </div>
              <div class="col">
                <label>Alternate Telephone / Mobile Number</label>
                <input type="text" class="form-control">
              </div>
            </div>
            <div class="row mb-2">
              <div class="col">
                <label>Email Address</label>
                <input type="email" class="form-control">
              </div>
            </div>
          </div>
        </div> -->
      </div>
      
      <!-- Mailing information -->
      <div class="mb-4">
        <h3 class="blue-header">
          MAILING ADDRESS
        </h3>
        <p class="required">
          Is your mailing address different from your primary residence?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="mailingAddressInBC">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="mailingAddressInBC">
            <label class="form-check-label">No</label>
          </div>
        </div>

      </div>

      <!-- Disaster affect information -->
      <div class="mb-4">
        <h3 class="blue-header">
          BRIEF STATEMENT OF HOW THE PERSON/FAMILY WERE AFFECTED BY THE DISASTER
        </h3>
        <p class="required">
          Please do not include any personal/medical information pertaining to the evacuee and their family.
        </p>
        <textarea class="form-control" formControlName="disasterAffectDetails" placeholder="Please specify" rows="4"></textarea>
      </div>

      <!-- Insurance information -->
      <div class="mb-4">
        <h3 class="blue-header">
          INSURANCE
        </h3>
        <p class="required">
          Do you have insurance to cover your immediate needs?
        </p>
        <div class="form-group">
          <div class="form-check">
            <input class="form-check-input" type="radio" value="yes" formControlName="insuranceCode">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" value="yes-unsure" formControlName="insuranceCode">
            <label class="form-check-label">Yes, but I'm not sure if I have coverage for this event.</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" value="no" formControlName="insuranceCode">
            <label class="form-check-label">No</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" value="unsure" formControlName="insuranceCode">
            <label class="form-check-label">I don't know</label>
          </div>
        </div>
      </div>
      
      <!-- Additional family information -->
      <div class="mb-4">
        <h3 class="blue-header">
          ADDITIONAL INFORMATION
        </h3>
        <p class="required">
          Do you have dietary requirements?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="dietaryNeeds">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="dietaryNeeds">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>
      
      <!-- Medication information -->
      <div class="mb-4">
        <p class="required">
          Do you (or anyone registering with you) take medication?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="medicationNeeds">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="medicationNeeds">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>
      <div class="mb-4" *ngIf="form.value.medicationNeeds=='true'" >
        <p class="required">
          Do you have adequate medication for the next three days?
        </p>
        <div *ngIf="form.value.hasThreeDayMedicationSupply==='false'"class="alert alert-warning" role="alert">
        <h4 class="alert-heading">
          The evacuee may be at increased risk from the medical condition.
        </h4>
        <p>Relevant procedure and lorem ipsum dolor sit amet...</p>
        </div>
        
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="hasThreeDayMedicationSupply" default>
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="hasThreeDayMedicationSupply">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>

      <!-- Pet information -->
      <div class="mb-4">
        <p class="required">
          Do you have pets with you?
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="hasPets">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="hasPets">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>
      
      <!-- Next steps -->
      <div class="mb-4">
        <h3 class="blue-header">
          NEXT STEPS
        </h3>
        <p class="required">
          While you are evacuated do you require supports?<br>
          This could be in the form of food / accommodation / clothing / incidentals or transportation.
        </p>
        <div class="form-group">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="true" formControlName="requiresSupport">
            <label class="form-check-label">Yes</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" [value]="false" formControlName="requiresSupport">
            <label class="form-check-label">No</label>
          </div>
        </div>
      </div>

      <!-- Family recovery planning -->
      <div class="mb-4">
        <h3 class="blue-header">
          FAMILY RECOVERY PLANS (IMMEDIATE & LONG TERM)
        </h3>
        <p class="required">
          ESS (Emergency Support Services) provides short term assistance to give you and your family a chance to recover.<br>
          Have you thought about what you will do after that time?
        </p>
        <textarea class="form-control" placeholder="Details" rows="4"></textarea>
      </div>

      <!-- Referrals -->
      <div class="mb-4">
        <h3 class="blue-header">
          REFERRALS MADE WITHIN RECEPTION CENTER
        </h3>
        <p required="true">
          Please check the boxes below where you have made referrals within the Reception Centre.
        </p>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" formControlName="hasInquiryReferral">
          <label class="form-check-label" for="inquiry">
            Inquiry
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" formControlName="hasHealthServicesReferral">
          <label class="form-check-label" for="healthServices">
            Health Services
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" formControlName="hasFirstAidReferral">
          <label class="form-check-label" for="firstAid">
            First Aid
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" formControlName="hasPersonalServicesReferral">
          <label class="form-check-label" for="personalServices">
            Personal Services
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" formControlName="hasChildCareReferral">
          <label class="form-check-label" for="childCare">
            Child Care
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" formControlName="hasPetCareReferral">
          <label class="form-check-label" for="petCare">
            Pet Care
          </label>
        </div>
      </div>

      <!-- Follow up -->
      <!--
      <div class="mb-4">
        <h3 class="blue-header">
          FOLLOW-UP REQUIRED
        </h3>
        <textarea class="form-control" placeholder="Details" rows="4"></textarea>
      </div>
      -->

    </div>

    <!-- Form content for testing -->
    <div class="mt-5">
      <h4>Form State</h4>
      <pre>{{ this.form.value | json }}</pre>
    </div>
  </div>

  <!-- Information side bar -->
  <div class="col-12 col-lg-4">
    <app-side-box title="Useful Information" icon="description">
      <section role="content">
        <p>
        If the task number you're looking for is not listed, please contact your supervisor or the Emergency Coordination Centre.
        </p>
        <section role="footer">
          <a class="btn btn-primary" href="tel:1-800-663-3456">1-800-663-3456</a>
        </section>
      </section>
    </app-side-box>
  </div>

  <!-- TODO: Delete this spacer hack -->
  <div class="col mb-6 mt-6">
    <h3>TODO: Delete this spacer that unhides the content form under the footer.</h3>
  </div>
</div>